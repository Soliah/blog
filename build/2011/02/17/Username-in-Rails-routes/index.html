<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='UTF-8'>
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' name='viewport'>
    <link href="/stylesheets/application.css" media="screen" rel="stylesheet" type="text/css" />
    <link href="/stylesheets/syntax.css" media="screen" rel="stylesheet" type="text/css" />
    <link href='//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css' rel='stylesheet'>
  </head>
  <body>
    <div id='bar'></div>
    <div class='container'>
      <header>
        <div class='col-xs-7 col-md-6 nav'>
          <a href='/'>
            <span id="first">yield</span> <span id="second">@chow</span>
          </a>
        </div>
        <div class='col-xs-5 col-md-6 social'>
          <a href='mailto:chris@chowie.net'>
            <i class='icon-envelope-alt'></i>
          </a>
          <a href='https://twitter.com/Soliah'>
            <i class='icon-twitter'></i>
          </a>
          <a href='https://github.com/Soliah'>
            <i class='icon-github'></i>
          </a>
          <a href='http://stackoverflow.com/users/140578/soliah'>
            <i class='icon-stackexchange'></i>
          </a>
        </div>
      </header>
      <section class='content'>
        <div class='row'>
          <div class='col-md-12'>
            <div class='post'>
              <h1>Username in Rails routes</h1>
              <time>Feb 17, 2011</time>
              <p>This seems to be a popular question on #rubyonrails@Freenode IRC channel. I decided to give it a go in a dummy app and this is what I ended up with in my <code>routes.rb</code>.</p>
              <pre class="highlight ruby"><span class="no">Routes</span><span class="o">::</span><span class="no">Application</span><span class="nf">.routes.draw</span> <span class="k">do</span>&#x000A;  <span class="n">resources</span> <span class="ss">:users</span><span class="p">,</span> <span class="ss">:only</span> <span class="o">=&gt;</span> <span class="o">[</span><span class="ss">:index</span><span class="p">,</span> <span class="ss">:create</span><span class="p">,</span> <span class="ss">:new</span><span class="o">]</span>&#x000A;  <span class="n">match</span> <span class="s2">&quot;:username/edit&quot;</span><span class="p">,</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s2">&quot;users#edit&quot;</span><span class="p">,</span> <span class="ss">:as</span> <span class="o">=&gt;</span> <span class="s2">&quot;edit_user&quot;</span><span class="p">,</span> <span class="ss">:via</span> <span class="o">=&gt;</span> <span class="ss">:get</span>&#x000A;  <span class="n">match</span> <span class="s2">&quot;:username&quot;</span><span class="p">,</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s2">&quot;users#show&quot;</span><span class="p">,</span> <span class="ss">:as</span> <span class="o">=&gt;</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="ss">:via</span> <span class="o">=&gt;</span> <span class="ss">:get</span>&#x000A;  <span class="n">match</span> <span class="s2">&quot;:username&quot;</span><span class="p">,</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s2">&quot;users#update&quot;</span><span class="p">,</span> <span class="ss">:as</span> <span class="o">=&gt;</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="ss">:via</span> <span class="o">=&gt;</span> <span class="ss">:put</span>&#x000A;  <span class="n">match</span> <span class="s2">&quot;:username&quot;</span><span class="p">,</span> <span class="ss">:to</span> <span class="o">=&gt;</span> <span class="s2">&quot;users#destroy&quot;</span><span class="p">,</span> <span class="ss">:as</span> <span class="o">=&gt;</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="ss">:via</span> <span class="o">=&gt;</span> <span class="ss">:delete</span>&#x000A;<span class="k">end</span></pre>
              <p>All references to <code>:id</code> are replaced with <code>:username</code> instead. I also had to add this in the model to change the resource identifier that Rails uses in urls from the number id to the username.</p>
              <pre class="highlight ruby"><span class="k">def </span><span class="nf">to_param</span>&#x000A;    <span class="n">username</span>&#x000A;<span class="k">end</span></pre>
              <p>In the controller every occurence of <code>User.find(params[:id])</code> had to be changed to <code>User.where(:username =&gt; params[:username]).first</code>. This needs to be done as the controller now receives <code>params[:username]</code> instead of <code>params[:id]</code>. Even though this works, I wonder if there&rsquo;s a cleaner way of doing this.</p>
              <hr>
              <div id='disqus_thread'></div>
              <noscript>
                <a href='http://chowie.disqus.com/?url=ref'>
                  View the discussion thread.
                </a>
              </noscript>
            </div>
          </div>
        </div>
      </section>
    </div>
    <footer class='container'>
      <div class='row'>
        <div class='col-md-12'>
          &copy; 2011-13 Christopher Chow. Powered by
          <a href='http://middlemanapp.com'>Middleman.</a>
          Hosted on
          <a href='http://http://pages.github.com'>GitHub Pages</a>
        </div>
      </div>
    </footer>
  </body>
  <script src="/javascripts/application.js" type="text/javascript"></script>
  <script src="http://disqus.com/forums/chowie/embed.js" type="text/javascript"></script>
</html>

